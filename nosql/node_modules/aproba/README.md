---
ms.openlocfilehash: b8e00448fe7f8445c8e81302b03a852ee0f7e5cc
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052691"
---
<a name="aproba"></a>aproba
======

非常に軽量の関数引数検証コントロール

```
var validate = require("aproba")

function myfunc(a, b, c) {
  // `a` must be a string, `b` a number, `c` a function
  validate('SNF', arguments) // [a,b,c] is also valid
}

myfunc('test', 23, function () {}) // ok
myfunc(123, 23, function () {}) // type error
myfunc('test', 23) // missing arg error
myfunc('test', 23, function () {}, true) // too many args error

```

有効な型は次のとおりです。

| 型 | description
| :--: | :----------
| *    | すべての型に一致します
| A    | `Array.isArray` または `arguments` オブジェクト
| S    | typeof == 文字列
| ×    | typeof == 数値
| F    | typeof == 関数
| O    | typeof == オブジェクトであり、型 A ではなく型 E ではない
| B    | typeof == ブール値
| E    | `instanceof Error` または `null` **(特殊: 下記を参照)**
| Z    | == `null`

検証エラーは、`EMISSINGARG`、`EINVALIDTYPE`、`ETOOMANYARGS` の `code` プロパティで区別される 3 つの例外の種類のうち 1 つをスローします。

無効な型を渡すと、`EUNKNOWNTYPE` のコードでスローされます。

**エラー** 引数が見つかり、null でない場合、残りの引数はオプションです。  つまり、`ESO` なら、魔法ではない `E` を `E|ESO|ZSO` で使用するようなものです。

### <a name="but-i-have-optional-arguments"></a>オプションの引数がある理由

複数の署名をパイプ `|` で区切って指定できます。
いずれかのシグネチャが引数と一致する場合、それらは有効と見なされます。

たとえば、`fs.createWriteStream` の署名を作成するとします。  そのドキュメントは、次のようになります。

```
fs.createWriteStream(path[, options])
```

これは、`SO|S` の署名になります。  つまり、文字列とオブジェクト、または文字列だけです。

これで、完全な `fs` ドキュメントを読むと、実際にはパスもバッファーになる可能性があることがわかります。  また、オプションには文字列を指定できます。つまり、次のようになります。
```
path <String> | <Buffer>
options <String> | <Object>
```

これを再現するには、可能なすべての組み合わせを完全に列挙する必要があり、それは `SO|SS|OO|OS|S|O` の署名になります。  このぎこちなさが特徴です。この種類のことを行うとき、API に追加する複雑さを思い出させます。


### <a name="browser-support"></a>ブラウザーのサポート

これには依存関係がないため、ブラウザーで動作するはずですが、より騒々しいスタック トレースがあります。

### <a name="why-this-exists"></a>これが存在する理由

非常にシンプルな引数検証コントロールが必要だった場合を考えます。 次の 2 つのことを行う必要がありました。

1. アサーションよりも簡潔で使いやすくする

2. DSL の無限の "自転車置き場の議論" を推奨しない

これが、型は 1 文字で指定され、オプションの引数というものがない理由です。 

これは、ユーザー データの検証を目的としたものではありません。 これは特に、関数のインターフェイスのアサートに関するものです。

より優れた検証が必要な場合は、手動で記述するか、他の場所を参照することをお勧めします。

