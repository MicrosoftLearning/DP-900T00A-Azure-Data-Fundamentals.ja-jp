---
ms.openlocfilehash: f445a828ea5ae5cba850b910d938f10a783a7ed8
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050971"
---
# <a name="npmlog"></a>npmlog

npm が使用するロガー ユーティリティ。

このロガーは非常に基本的です。  npm のログ記録を実行します。  カスタム レベルと色付き出力をサポートしています。

既定では、ログは stderr に書き込まれます。  ストリーム以外の出力にログ メッセージを送信する場合は、`log.stream` メンバーを変更するか、メンバーが出力するイベントをリッスンするだけで、必要な操作を行うことができます。

# <a name="installation"></a>インストール

```console
npm install npmlog --save
```

# <a name="basic-usage"></a>基本的な使用方法

```javascript
var log = require('npmlog')

// additional stuff ---------------------------+
// message ----------+                         |
// prefix ----+      |                         |
// level -+   |      |                         |
//        v   v      v                         v
    log.info('fyi', 'I have a kitty cat: %j', myKittyCat)
```

## <a name="loglevel"></a>log.level

* {文字列}

ログを表示するレベル。  このレベル以上のログが表示されます。  特別なレベル `silent` では、何も表示されなくなります。

## <a name="logrecord"></a>log.record

* {Array}

入力されたすべてのログ メッセージの配列。

## <a name="logmaxrecordsize"></a>log.maxRecordSize

* {Number}

保持するレコードの最大数。  log.record がこの値に対して 10% を超える場合、この値の 90% にスライスされます。

10% ウィンドウの理由は、すべてのログ エントリで大きな配列のサイズを変更する必要がないようにするためです。

## <a name="logprefixstyle"></a>log.prefixStyle

* {Object}

プレフィックスのスタイルを設定する方法を指定するスタイル オブジェクト。  (後述)。

## <a name="logheadingstyle"></a>log.headingStyle

* {Object}

見出しのスタイルを指定するスタイル オブジェクト。  (後述)。

## <a name="logheading"></a>log.heading

* {String} 既定値: ""

設定されている場合は、すべての行の先頭に印刷される見出し。

## <a name="logstream"></a>log.stream

* {Stream} 既定値: `process.stderr`

出力が書き込まれるストリーム。

## <a name="logenablecolor"></a>log.enableColor()

出力ストリームに関係なく、すべてのメッセージで色が強制的に使用されるようにします。

## <a name="logdisablecolor"></a>log.disableColor()

すべてのメッセージの色を無効にします。

## <a name="logenableprogress"></a>log.enableProgress()

ログ アクティビティのスピナーと進行状況バーの表示を有効にします

## <a name="logdisableprogress"></a>log.disableProgress()

進行状況バーの表示を無効にします

## <a name="logenableunicode"></a>log.enableUnicode()

進行状況バーに Unicode テーマが強制的に使用されるようにします。

## <a name="logdisableunicode"></a>log.disableUnicode()

進行状況バーで Unicode の使用を無効にします。

## <a name="logsetgaugetemplatetemplate"></a>log.setGaugeTemplate(template)

進行状況バーを出力するためのテンプレートを設定します。 詳細については、[gauge に関するドキュメント]を参照してください。

[gauge に関するドキュメント]: https://npmjs.com/package/gauge

## <a name="logsetgaugethemesetthemes"></a>log.setGaugeThemeset(themes)

進行状況バーのテーマを選択するテーマセットを選択します。 詳細については、[gauge に関するドキュメント]を参照してください。

## <a name="logpause"></a>log.pause()

ストリームへのメッセージの出力を停止しますが、削除しません。

## <a name="logresume"></a>log.resume()

一時停止中に書き込まれたバッファー内のすべてのメッセージを出力します。

## <a name="logloglevel-prefix-message-"></a>log.log(level, prefix, message, ...)

* `level` {String} メッセージを出力するレベル
* `prefix` {String} 文字列プレフィックス。  スキップするには "" に設定します。
* `message...` `util.format` への引数

指定したレベルにあるログ メッセージを出力します。

## <a name="loglevel"></a>log\[level](prefix, message, ...)

たとえば、オブジェクトに適用された

* log.silly(prefix, message, ...)
* log.verbose(prefix, message, ...)
* log.info(prefix, message, ...)
* log.http(prefix, message, ...)
* log.warn(prefix, message, ...)
* log.error(prefix, message, ...)

`log.log(level, prefix, message, ...)` などです。  この方法では、各レベルに短縮形が与えられるので、`log.info(prefix, message)` を実行できます。

## <a name="logaddlevellevel-n-style-disp"></a>log.addLevel(level, n, style, disp)

* `level` {String} レベル インジケーター
* `n` {Number} 数値レベル
* `style` {Object} fg、bg、inverse などを含むオブジェクト。
* `disp` {String} 出力内の `level` のオプションの置き換え。

短縮関数などを使用して新しいレベルを設定します。

数値が `Infinity` の場合、レベルをそれに設定すると、すべてのログ メッセージが抑制されることに注意してください。  数値が `-Infinity` の場合、表示する唯一の方法は、すべてのログ メッセージを有効にすることだけです。

## <a name="lognewitemname-todo-weight"></a>log.newItem(name, todo, weight)

* `name` {String} 省略可能。プログレス アイテム名。
* `todo` {Number} 省略可能。実行する作業の合計量。 既定値は 0 です。
* `weight` {Number} 省略可能。他の項目に対するこの項目の重み。 既定値は 1。

これにより、進行状況トラッカーに新しい `are-we-there-yet` 項目トラッカーが追加されます。 返されるオブジェクトには `log[level]` メソッドがありますが、それ以外の場合は `are-we-there-yet` `Tracker` オブジェクトです。

## <a name="lognewstreamname-todo-weight"></a>log.newStream(name, todo, weight)

これにより、進行状況トラッカーに新しい `are-we-there-yet` ストリーム トラッカーが追加されます。 返されるオブジェクトには `log[level]` メソッドがありますが、それ以外の場合は `are-we-there-yet` `TrackerStream` オブジェクトです。

## <a name="lognewgroupname-weight"></a>log.newGroup(name, weight)

これにより、進行状況トラッカーに新しい `are-we-there-yet` トラッカー グループが追加されます。 返されるオブジェクトには `log[level]` メソッドがありますが、それ以外の場合は `are-we-there-yet` `TrackerGroup` オブジェクトです。

# <a name="events"></a>イベント

イベントはすべてメッセージ オブジェクトと共に出力されます。

* `log` すべてのメッセージに対して出力されます
* `log.<level>` `<level>` レベルを持つすべてのメッセージに対して出力されます。
* `<prefix>` プレフィックスを持つメッセージは、そのプレフィックスもイベントとして出力します。

# <a name="style-objects"></a>スタイル オブジェクト

スタイル オブジェクトには、次のフィールドを含めることができます。

* `fg` {String} 前景テキストの色
* `bg` {String} 背景の色
* `bold`、`inverse`、`underline` {Boolean} 関連付けられているプロパティを設定します
* `bell` {Boolean} ノイズを出します (これはおそらくかなりの音量です。)

# <a name="message-objects"></a>メッセージ オブジェクト

すべてのログ イベントはメッセージ オブジェクトと共に出力され、`log.record` 一覧には作成されたすべてのログ イベントが含まれます。  次のフィールドがあります。

* `id` {Number}
* `level` {String}
* `prefix` {String}
* `message` {String} `util.format()` の結果
* `messageRaw` {Array} `util.format()` の引数

# <a name="blocking-ttys"></a>TTY のブロック

tty の場合で、setBlocking 呼び出しがある場合は、[`set-blocking`](https://npmjs.com/package/set-blocking) を使用して stderr と stdout のブロックを設定します。
これは、Node.js 6.x の初期バージョンの issue に対する回避策であり、OSX で stderr と stdout が非ブロッキングになりました。 (これらは常に Windows をブロックし、Linux ではブロックしませんでした。) `npmlog` では、stdout と stderr への出力をインターレースできるように、それらがブロックされている必要があります。
