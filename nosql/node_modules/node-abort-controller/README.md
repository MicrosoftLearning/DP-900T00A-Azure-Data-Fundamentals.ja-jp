---
ms.openlocfilehash: ca2cf748b426d17058b55202a60ece01d9e05592
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052411"
---
# <a name="node-abort-controller"></a>node-abort-controller

EventEmitter に基づく Node.JS 用の AbortController ポリフィル

[![ビルドの状況](https://dev.azure.com/stfaul/node-abort-controller/_apis/build/status/southpolesteve.node-abort-controller?branchName=master)](https://dev.azure.com/stfaul/node-abort-controller/_build/latest?definitionId=3&branchName=master)

## <a name="usage"></a>使用

```js
import fetch from 'node-fetch'
import AbortController from 'node-abort-controller'

const controller = new AbortController()
const signal = controller.signal

await fetch('https:/www.google.com', { signal })

// Abort after 500ms. Effectively a timeout
setTimeout(() => controller.abort(), 500)
```

## <a name="why-would-i-use-this"></a>これを使用する理由

必要ない場合があります。 一般に、JavaScript コードを実行できる環境は 3 つあります。

- Node
- 最新のブラウザー (Internet Explorer ではありません)
- 従来のブラウザー (主に Internet Explorer)

最新の JS API の場合、各環境は理想的には次のようにポリフィルを取得します。

- 必要な場合のみ
- プラットフォームに固有。

実際には、これは簡単ではありません。 webpack や browserify などのツールは、すべての環境ですぐに動作させるための優れた機能を提供します。 しかし、上の両方の点を実現できないことがよくあります。 おそらく、それを必要としないプラットフォームで理想的ではないポリフィルを提供することになります。 では、開発者はどうすればよいでしょう。 `fetch` と `AbortController` の場合は、自動的に処理されます。 これは、その作業のガイドです。

次のものを作成している場合...

#### <a name="application-running-in-modern-browsers"></a>最新のブラウザーで実行されるアプリケーション:

おめでとうございます! ライブラリやポリフィルはまったく必要ありません。 このタブを閉じてください。このパッケージをアンインストールしてください。

#### <a name="application-running-in-modern-browsers-and-node-such-as-a-server-side-rendered-js-app"></a>最新のブラウザーと Node で実行されるアプリケーション (サーバー側でレンダリングされる JS アプリなど):

"_このパッケージ_" と [node-fetch](https://www.npmjs.com/package/node-fetch) を使用します。 これが最小限必要なことです。

#### <a name="application-supporting-legacy-browsers-and-not-node"></a>レガシ ブラウザーをサポートし、Node をサポートしないアプリケーション:

[abort-controller](https://www.npmjs.com/package/abort-controller) と [whatwg-fetch](https://www.npmjs.com/package/whatwg-fetch) を使用します。 これらは、すべてのブラウザー環境で動作する、いっそう完全なポリフィルです。

#### <a name="application-supporting-legacy-browsers-and-node"></a>レガシ ブラウザーと Node をサポートするアプリケーション:

[abort-controller](https://www.npmjs.com/package/abort-controller) と [cross-fetch](https://www.npmjs.com/package/cross-fetch) を使用します。 上記と同じですが、cross-fetch はブラウザーと node.js の両方で正しくポリフィルを行う点が異なります

#### <a name="library-being-consumed-by-other-applications-and-using-fetch-internally"></a>他のアプリケーションによって使用され、内部的に `fetch` を使用するライブラリ:

"_このパッケージ_" と [node-fetch](https://www.npmjs.com/package/node-fetch) を使用します。 これは、エンド ユーザーにとって最も小さく、最も融通の利く組み合わせです。 Internet Exploer を対象とするアプリケーション開発者は、`AbortController` と `fetch` を独自にポリフィル化する必要があります。 ただし、最新のブラウザーのみを対象とする開発者に対しては、ライブラリは不必要なポリフィルを強制しません。

## <a name="goals"></a>目標

上記のガイドを念頭に置いて、このライブラリには非常に具体的な目標のセットがあります。

1. node.js で最小限のポリフィルを提供する
2. どのブラウザー環境でもポリフィルを提供しない

これは、`fetch` と `AbortController` を内部的に使用し、ブラウザーと Node の "_両方_" の開発者をターゲットとする "_ライブラリ作成者_" に最適です。

## <a name="prior-art"></a>先行技術

https://github.com/mysticatea/abort-controller に関して @mysticatea に感謝します。 これは素晴らしい `AbortController` ポリフィルであり、多くのユース ケースに理想的です。
