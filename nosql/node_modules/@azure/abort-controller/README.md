---
ms.openlocfilehash: fe1a29595719e88783616e54c070b9b946052910
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052643"
---
# <a name="azure-abort-controller-library-for-javascript"></a>JavaScript 用 Azure Abort Controller ライブラリ

`@azure/abort-controller` パッケージには、`AbortController` クラスと `AbortSignal` クラスが用意されています。 これらのクラスは、最新のクラスに組み込まれている [AbortController](https://developer.mozilla.org/docs/Web/API/AbortController) と、[fetch](https://developer.mozilla.org/docs/Web/API/Fetch_API) によって使用されている `AbortSignal` との互換性があります。
`AbortController` クラスを使用して、`AbortSignalLike` 型のパラメーターを受け取る Azure SDK 内での操作をキャンセルするために使用できる `AbortSignal` クラスのインスタンスを作成します。

## <a name="getting-started"></a>作業の開始

### <a name="installation"></a>インストール

次のように npm を使用してこのライブラリをインストールします

```
npm install @azure/abort-controller
```

## <a name="key-concepts"></a>主要概念

`AbortController` を使用して、`AbortSignal` を作成します。これは、その後、保留中の作業をキャンセルするために、Azure SDK 操作に渡されます。 `AbortSignal` は、インスタンス化された `AbortController` の `signal` プロパティを経由してアクセスできます。
また、`AbortSignal` は、`AbortController.timeout(100)` などの静的メソッドから直接返すこともできます。
100 ミリ秒後にキャンセルされます。

インスタンス化された `AbortController` の `abort()` を呼び出すと、関連付けられている `AbortSignal` に登録されている `abort` イベント リスナーが起動します。
同じコントローラーでそれ以降に行われる `abort()` への呼び出しは、すべて無効になります。

`AbortSignal.none` 静的プロパティは、中止できない `AbortSignal` を返します。

親シグナルで `abort()` を呼び出すことで、リンクされたすべてのシグナルが中止されるように、`AbortSignal` の複数のインスタンスをリンクすることができます。
これは、一方向のリンケージであるため、親シグナルはリンクされたシグナルに影響を与える可能性がありますが、逆方向ではそのようになりません。
`AbortSignals` をまとめてリンクするには、親シグナルを `AbortController` コンストラクターに渡します。

## <a name="examples"></a>例

次の例では、`doAsyncWork` がプロパティのバッグを受け取る関数であり、そのうちの 1 つは中止シグナルであると想定されています。

### <a name="example-1---basic-usage"></a>例 1 - 基本的な使用方法

```js
import { AbortController } from "@azure/abort-controller";

const controller = new AbortController();
doAsyncWork({ abortSignal: controller.signal });

// at some point later
controller.abort();
```

### <a name="example-2---aborting-with-timeout"></a>例 2 - タイムアウトによる中止

```js
import { AbortController } from "@azure/abort-controller";

const signal = AbortController.timeout(1000);
doAsyncWork({ abortSignal: signal });
```

### <a name="example-3---aborting-sub-tasks"></a>例 3 - サブタスクの中止

```js
import { AbortController } from "@azure/abort-controller";

const allTasksController = new AbortController();

const subTask1 = new AbortController(allTasksController.signal);
const subtask2 = new AbortController(allTasksController.signal);

allTasksController.abort(); // aborts allTasksSignal, subTask1, subTask2
subTask1.abort(); // aborts only subTask1
```

### <a name="example-4---aborting-with-parent-signal-or-timeout"></a>例 4 - 親シグナルまたはタイムアウトによる中止

```js
import { AbortController } from "@azure/abort-controller";

const allTasksController = new AbortController();

// create a subtask controller that can be aborted manually,
// or when either the parent task aborts or the timeout is reached.
const subTask = new AbortController(allTasksController.signal, AbortController.timeout(100));

allTasksController.abort(); // aborts allTasksSignal, subTask
subTask.abort(); // aborts only subTask
```

## <a name="contributing"></a>共同作成

このライブラリに投稿する場合、コードをビルドしてテストする方法の詳細については、[投稿ガイド](https://github.com/Azure/azure-sdk-for-js/blob/master/CONTRIBUTING.md)を参照してください。

![インプレッション数](https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-js%2Fsdk%2Fcore%2Fabort-controller%2FREADME.png)
