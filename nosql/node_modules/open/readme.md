---
ms.openlocfilehash: faba66fd211251cabf9efd984bb907f35d419ce4
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052307"
---
# <a name="open"></a>開く

> URL、ファイル、実行可能ファイルなどを開きます。 クロスプラットフォームである。

これは、ブラウザーではなく、コマンドライン ツールとスクリプトで使用することを目的としたものです。

Electron でこれが必要な場合は、代わりに [`shell.openPath()`](https://www.electronjs.org/docs/api/shell#shellopenpathpath) を使用してください。

注: 注: 元の [`open` パッケージ](https://github.com/pwnall/node-open)は以前、このパッケージのために非推奨となり、当社がその名前を引き継いだので、このパッケージの名前は `opn` ではなく `open` となりました。 元の `open` パッケージ (`open@0.0.5` またはそれ以下) からアップグレードする場合は、API が異なる点に注意してください。

#### <a name="why"></a>なぜですか?

- 積極的にメンテナンスされている。
- アプリの引数をサポート。
- `exec` の代わりに `spawn` を使用しているため安全。
- 未解決の元の `node-open` issue の大部分は修正されている。
- Linux 用の最新の [`xdg-open` スクリプト](https://cgit.freedesktop.org/xdg/xdg-utils/commit/?id=c55122295c2a480fa721a9614f0e2d42b2949c18)が含まれている。
- Windows アプリへの WSL パスをサポート。

## <a name="install"></a>[インストール]

```
$ npm install open
```

## <a name="usage"></a>使用

```js
const open = require('open');

(async () => {
    // Opens the image in the default image viewer and waits for the opened app to quit.
    await open('unicorn.png', {wait: true});
    console.log('The image viewer app quit');

    // Opens the URL in the default browser.
    await open('https://sindresorhus.com');

    // Opens the URL in a specified browser.
    await open('https://sindresorhus.com', {app: 'firefox'});

    // Specify app arguments.
    await open('https://sindresorhus.com', {app: ['google chrome', '--incognito']});
})();
```

## <a name="api"></a>API

macOS では `open`、Windows では `start`、その他のプラットフォームでは `xdg-open` コマンドを使用します。

### <a name="opentarget-options"></a>open(target, options?)

[生成された子プロセス](https://nodejs.org/api/child_process.html#child_process_class_childprocess)の Promise を返します。 通常は、これを使用する必要はありませんが、カスタム イベント リスナーをアタッチしたり、生成されたプロセスで他の操作を直接実行したりする場合に便利です。

#### <a name="target"></a>ターゲット (target)

型: `string`

開きたいもの。 URL、ファイル、または実行可能ファイルを指定できます。

既定のアプリでそのファイルの種類を開きます。 たとえば、既定のブラウザーで URL が開きます。

#### <a name="options"></a>options

型: `object`

##### <a name="wait"></a>wait

型: `boolean`\
既定値: `false`

開いているアプリが終了するのを待ってから、Promise を実行します。 `false` の場合、アプリを開いたときにすぐに実行されます。

ウィンドウが閉じるだけでなく、アプリが終了するまで待機します。

Windows では、待機できるようにアプリを明示的に指定する必要があります。

##### <a name="background-supmacos-onlysup"></a>バックグラウンド <sup>(macOS のみ)</sup>

型: `boolean`\
既定値: `false`

アプリをフォアグラウンドに移動させないでください。

##### <a name="app"></a>app

型: `string | string[]`

`target` を開くのに使用するアプリ、またはアプリとアプリの引数を含む配列を指定します。

アプリ名はプラットフォームによって異なります。 再利用可能なモジュールでハードコーディングしないでください。 たとえば、Chrome は macOS では `google chrome`、Linux では `google-chrome`、Windows では `chrome` にあります。

アプリの完全パスを渡すこともできます。 たとえば WSL では、Chrome の Windows インストールの場合、これは `/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe` になります。

##### <a name="url"></a>url

型: `boolean`\
既定値: `false`

`URL` を使用して、ターゲットを実行する前にエンコードします。<br>
URL ではないターゲットでは使用しないことをお勧めします。

[Windows 注意事項で二重引用符](#double-quotes-on-windows)を扱う場合に特に便利です。

##### <a name="allownonzeroexitcode"></a>allowNonzeroExitCode

型: `boolean`\
既定値: `false`

`wait` オプションが `true` の場合、開いているアプリが 0 以外の終了コードで終了できるようにします。

このオプションの設定は推奨されません。 成功の規則は、終了コード 0 です。

## <a name="caveats"></a>注意事項

### <a name="double-quotes-on-windows"></a>Windows の二重引用符

TL;DR:すべての二重引用符が `target` から削除され、目的の宛先 (Windows) に到達しません。

コマンドと URL を区切るアンパサンド (`&`) 文字に関する Window のコマンド プロンプト (`cmd.exe`) の特定の動作により、二重引用符が特殊なケースになりました。

これとその他の問題に対する解決策 ([#146](https://github.com/sindresorhus/open/pull/146)) は、引用符で囲むだけで、二重引用符で囲まれた引数を `cmd.exe` がプレーン テキスト引数として解釈するという事実を利用することでした (Node.js で既に行っているように)。 残念ながら、`cmd.exe` で実行できるのは、次の 2 つのうち **いずれか** のみです。つまり、すべてを処理する **か**、まったく処理しないかです。 独自のドキュメントに従って:

>*/C または /K を指定すると、スイッチの後のコマンド ラインの残りの部分がコマンド ラインとして処理されます。ここで、引用符 (") 文字の処理には次のロジックが使用されます。*
>
>    1.  *次の条件がすべて満たされた場合、コマンド ラインの引用符文字は保持されます。*
>        - */S スイッチなし*
>        - *厳密に 2 つの引用符文字*
>        - *2 つの引用符文字の間に特殊文字なし。ここで特殊文字は次のいずれかです: &<>()@^|*
>        - *2 つの引用符文字の間に 1 つ以上の空白文字がある*
>        - *2 つの引用符文字の間の文字列は実行可能ファイルの名前。*
>
>    2.  *それ以外の場合、古い動作は、最初の文字が引用符文字であるかどうかを確認することです。その場合は先頭の文字を削除し、コマンド ラインの最後の引用符文字を削除し、最後の引用符文字の後のテキストを保持します。*

すべての問題を解決するオプションは 2 つ目で、動作の一貫性を高める目的で `/S` スイッチを使用しているため、**常に** 2 番目のオプションが使用されます。 注意事項は、この組み込みの二重引用符処理によってコマンドラインからそれらすべてが削除される結果になり、これまでにうまく動作するエスケープ方法を見つけることができませんでした (もし見つけたら、自由に投稿してください)。

この注意事項の影響を少なくするには (少なくとも URL の場合)、[url オプション](#url)を確認してください。 URL で使用する場合、二重引用符は "保持" されます。

## <a name="related"></a>関連項目

- [open-cli](https://github.com/sindresorhus/open-cli) - このモジュールの CLI
- [open-editor](https://github.com/sindresorhus/open-editor) - エディター内の特定の行と列でファイルを開く

---

<div align="center">
    <b>
        <a href="https://tidelift.com/subscription/pkg/npm-opn?utm_source=npm-opn&utm_medium=referral&utm_campaign=readme">Tidelift サブスクリプションを使用してこのパッケージの専門的なサポートを受ける</a>
    </b>
    <br>
    <sub> Tidelift は、保守担当者にとってオープン ソースを持続可能なものにするのに役立つ一方で、<br>企業に依存関係のセキュリティ、メンテナンス、ライセンスに関する保証を提供します。
    </sub>
</div>
